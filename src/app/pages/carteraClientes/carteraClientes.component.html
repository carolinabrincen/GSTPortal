<!-- Card principal  -->
<div class="content-block dx-card responsive-paddings padding-10">

    <dx-tab-panel>
        <dxi-item title="Cartera cliente">
            <br><br>
            <dx-responsive-box>
                <!-- COLS -->
                <!-- <dxi-col [ratio]="1"></dxi-col> -->
                <!--Año-->
                <dxi-col [ratio]=".30"></dxi-col>
                <dxi-col [ratio]="1"></dxi-col>
                <!--vacia-->
                <dxi-col [ratio]=".15"></dxi-col>
                <!--Buscar-->
                <dxi-col [ratio]="1"></dxi-col>
                <dxi-col [ratio]=".25"></dxi-col>
        
        
                <!-- ROWS -->
                <dxi-row [ratio]="1"></dxi-row>
                <dxi-row [ratio]="1"></dxi-row>
                <dxi-row [ratio]="1"></dxi-row>
                <dxi-row [ratio]="1"></dxi-row>
                <dxi-row [ratio]="1"></dxi-row>
                <dxi-row [ratio]="1"></dxi-row>
                <dxi-row [ratio]="1"></dxi-row>
                <dxi-row [ratio]="1"></dxi-row>
        
                <!-- CONTROLES DEL FORM -->
                <!--#region :::: ROW 1 DEL FORM ::::  -->
                <!-- AÑO -->
                <dxi-item>
                    <dxi-location screen="md lg" [row]="0" [col]="0"></dxi-location>
                    <dxi-location style="margin-top: 1rem" screen="xs sm" [row]="10" [col]="0" [colspan]="12"></dxi-location>
                    <div>Compañía:</div>
                </dxi-item>
        
                <dxi-item>
                    <dxi-location screen="md lg" [row]="0" [col]="1"></dxi-location>
                    <dxi-location style="margin-top: 0.5rem" screen="xs sm" [row]="11" [col]="0" [colspan]="12"></dxi-location>
                    <dx-select-box [items]="boxCartera" displayExpr="cartera" valueExpr="id" (onValueChanged)="selectBoxCartera($event)">
                    </dx-select-box>
                </dxi-item>
                <!-- BUSCAR -->
                <dxi-item>
                    <dxi-location screen="md lg" [row]="0" [col]="3"></dxi-location>
                    <dxi-location style="margin-top: .20rem" screen="xs sm" [row]="12" [col]="0" [colspan]="12"></dxi-location>
                    <div>
                        <dx-button stylingMode="contained" text="Buscar" icon="search" type="normal" [width]="120" (onClick)="buscarClick($event)">
                        </dx-button>
                    </div>
                </dxi-item>
                <!--#endregion :::: FIN ROW 1 ::::  -->
            </dx-responsive-box>

            <br><br><br>

            <h4><p style="text-align: center"> <b>
                TRANSPORTES DE CARGA GEMINIS, S.A. DE C.V.<br>
                SALDOS DE CARTERA AL 31 DE MARZO DEL 2023
            </b></p></h4>

            <br>

            <dx-data-grid  #ER id="gridContainer2" [dataSource]="carteraClientes" [height]="700"[showBorders]="true" [columnAutoWidth]="true"
            (onRowPrepared)="onRowPreparedCAER($event)" (onCellPrepared)="onCellPreparedCAER($event)">

              <dxo-scrolling mode="virtual" rowRenderingMode="virtual"></dxo-scrolling>
              <dxo-paging [pageSize]="100"></dxo-paging>
              <dxo-search-panel [visible]="true" [width]="240" placeholder="Buscar..."></dxo-search-panel>
              <dxo-export [enabled]="true" fileName="CARTERA CLIENTES" [customizeExcelCell]="customizeCAER"></dxo-export>
<!-- [customizeExcelCell]="customizeCAER" -->
                <dxi-column dataField="nombreCliente" caption="Nombre de cliente"></dxi-column>
                <dxi-column dataField="corriente" caption="Corriente" [format]="formatSliderTooltip"></dxi-column>
                <dxi-column dataField="dias1A30" caption="1 a 30 dias" [format]="formatSliderTooltip"></dxi-column>
                <dxi-column dataField="dias31A60" caption="31 a 60 dias" [format]="formatSliderTooltip"></dxi-column>
                <dxi-column dataField="dias61A90" caption="61 a 90 dias" [format]="formatSliderTooltip"></dxi-column>
                <dxi-column dataField="mayorA90" caption="Mayor de 90" [format]="formatSliderTooltip"></dxi-column>
                <dxi-column dataField="total" caption="Total" [format]="formatSliderTooltip" cssClass="styletotal"></dxi-column>

            </dx-data-grid>
        </dxi-item>

        <dxi-item title="Detalle">
            <dx-data-grid  #ING id="gridContainer1" [dataSource]="detalle" [height]="600"[showBorders]="true" [columnAutoWidth]="true"
            (onRowPrepared)="onRowPreparedD($event)" (onCellPrepared)="onCellPreparedD($event)">

            <dxo-search-panel [visible]="true" [width]="240" placeholder="Buscar..."></dxo-search-panel>
            <!-- <dxo-header-filter [visible]="true"></dxo-header-filter> -->

            <dxi-column dataField="nombre" caption="" [fixed]="true" [groupIndex]="0"></dxi-column>  <!-- AGRUPACION 1 -->
            <dxi-column dataField="documento" caption="" [fixed]="true" [groupIndex]="1"></dxi-column><!-- AGRUPACION 2 -->

            <dxi-column dataField="cliente" caption="Serie" [width]="100"></dxi-column>
            <dxi-column dataField="nombre" caption="Nombre" [width]="100"></dxi-column>
            <dxi-column dataField="nocarta" caption="Num. Carta" [width]="100"></dxi-column> 
            <dxi-column dataField="documento" caption="Documento" [width]="100"></dxi-column>
            <dxi-column dataField="remision" caption="Remisión" [width]="150"></dxi-column>
            <dxi-column dataField="fechA_GUIA" caption="Fecha guía" [width]="150"></dxi-column>
            <dxi-column dataField="viaje" caption="Recoger en" [width]="100"></dxi-column>
            <dxi-column dataField="unidad" caption="Unidad" [width]="100"></dxi-column> 
            <dxi-column dataField="remolquE1" caption="Remolque 1" [width]="100"></dxi-column> 
            <dxi-column dataField="totaL_SALDO" caption="Total saldo" [width]="100"></dxi-column> 
            <dxi-column dataField="totaL_VENCIDOS" caption="Total vencido" [width]="100"></dxi-column> 
            <dxi-column dataField="saldo" caption="Saldo" [width]="100"></dxi-column>            
            <dxi-column dataField="porvencido" caption="Por vencer" [width]="100"></dxi-column> 
            <dxi-column dataField="diaS115" caption="Dias 115" [width]="100"></dxi-column> 
            <dxi-column dataField="diaS1630" caption="Dias 1630" [width]="100"></dxi-column> 
            <dxi-column dataField="diaS3145" caption="Dias 3145" [width]="100"></dxi-column> 
            <dxi-column dataField="diaS4660" caption="Dias 4660" [width]="100"></dxi-column> 
            <dxi-column dataField="diaS6190" caption="Dias 6190" [width]="100"></dxi-column> 
            <dxi-column dataField="diaS91120" caption="Dias 91120" [width]="100"></dxi-column> 
            <dxi-column dataField="diaS120" caption="Dias 120" [width]="100"></dxi-column> 
            <dxi-column dataField="poR_VENCER" caption="Por vencer" [width]="100"></dxi-column> 
            <dxi-column dataField="poR_VENCER2" caption="Por vencer 2" [width]="100"></dxi-column> 
            <dxi-column dataField="dias_vencimiento" caption="Días transcurridos" [width]="140"></dxi-column>
            <dxi-column dataField="venC17" caption="Venc 17" [width]="100"></dxi-column> 
            <dxi-column dataField="venC815" caption="Venc 815" [width]="100"></dxi-column> 
            <dxi-column dataField="venC1630" caption="Venc 1630" [width]="100"></dxi-column> 
            <dxi-column dataField="venC31" caption="Venc 31" [width]="100"></dxi-column> 
            <dxi-column dataField="saldO_SIN_CCOBRO" caption="Saldo sin cobro" [width]="100"></dxi-column>
            <dxi-column dataField="totaL_INTEGRADO" caption="Total integrado" format="$ #,###,###.##;-$ #,##0.##" [width]="100"></dxi-column>
            <dxi-column dataField="tipO_DE_CREDITO" caption="Tipo de credito" [width]="100"></dxi-column>             
            <dxi-column dataField="diaS_DECREDITO" caption="Días de crédito" [width]="100"></dxi-column>
            <dxi-column dataField="subtotal" caption="Subtotal" [width]="100"></dxi-column> 
            <dxi-column dataField="iva" caption="IVA" [width]="100"></dxi-column>  
            <dxi-column dataField="fechA_DE_VENCIMIENTO" caption="Fecha vencimiento" [width]="150"></dxi-column>
            <dxi-column dataField="montO_RETENCION" caption="Monto retención" [width]="100"></dxi-column>            
            <dxi-column dataField="fechA_CARTA" caption="Fecha cierre" [width]="150"></dxi-column>
            <dxi-column dataField="factoR_IVA" caption="Factor IVA" [width]="100"></dxi-column> 
            <dxi-column dataField="factoR_DE_RETENCION" caption="Factor de retención" [width]="100"></dxi-column> 
            <dxi-column dataField="monto_pago" caption="Monto pago" [width]="100"></dxi-column> 
            <dxi-column dataField="status_guia" caption="Status guia" [width]="100"></dxi-column> 
            <dxi-column dataField="tipo_origen" caption="Tipo origen" [width]="100"></dxi-column> 
            <dxi-column dataField="tipo_doc" caption="Tipo doc." [width]="100"></dxi-column> 
            <dxi-column dataField="no_poliza" caption="Num. Poliza" [width]="100"></dxi-column> 
            <dxi-column dataField="no_cartaF" caption="Num. CartaF" [width]="100"></dxi-column> 
            <dxi-column dataField="id_area" caption="UUID" [width]="100"></dxi-column>
            <dxi-column dataField="" caption="Obsevaciones" [width]="100"></dxi-column>
            
            <dxo-summary>
                <dxi-group-item column="totaL_INTEGRADO" summaryType="sum" displayFormat="{0}" valueFormat="$ #,###,###.##;-$ #,##0.##" [showInGroupFooter]="true"></dxi-group-item>
        
                <dxi-total-item column="totaL_INTEGRADO" summaryType="sum" valueFormat="$ #,##0.##;-$ #,##0.##" displayFormat="{0}"></dxi-total-item>
            </dxo-summary>

            <dxo-group-panel [visible]="false"></dxo-group-panel>
            <dxo-grouping #expand [autoExpandAll]="false"></dxo-grouping>
            <dxo-export [enabled]="true" fileName="Detalle"></dxo-export>
            <dxo-paging [pageSize]="60"></dxo-paging>
            <dxo-sorting mode="none"></dxo-sorting>

            </dx-data-grid>
        </dxi-item>
    </dx-tab-panel>

    <!-- LOAD PANEL -->
    <dx-load-panel #loadPanel shadingColor="rgba(0,0,0,0.4)" [position]="{ of: '#rentCont2' }" [(visible)]="loadingVisible" [showIndicator]="true" [showPane]="true" [shading]="true" [closeOnOutsideClick]="false" (onShown)="onShown()" (onHidden)="onHidden()">
    </dx-load-panel>

    <dx-toast [(visible)]="isVisible" type="warning" message="Seleccione Año y Mes">  
        <dxo-position
            my="top"
            at="right"
            of="#container">
        </dxo-position>
    </dx-toast>
</div>
